<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
<h1>
    Nyers giroszk√≥p adat
</h1>
<pre class="output">
    alpha:
    beta:
    gamma:
    fps:
</pre>

<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>
<script>
    var xs = [0];
    var ys = [0];
    var zs = [0];

    function setup() {
        createCanvas(512, 256);
        noFill();
    }

    window.addEventListener('devicemotion', function(event) {
        var output = document.querySelector('.output');
        //console.log(event.acceleration.x + ' m/s2');
        console.log(event.interval);
        var x = event.rotationRate.alpha;  // In degree in the range [-180,180]
        var y = event.rotationRate.beta;
        var z = event.rotationRate.gamma;
        var fps = event.interval;
        xs.push(x);
        ys.push(y);
        zs.push(z);
        if (xs.length > 512) {
            var tmp = xs.shift();
            tmp = ys.shift();
            tmp = zs.shift();
        }
        console.log([x,y,z]);
        function plot(data, col) {
            strokeWeight(3);
            stroke(col[0], col[1], col[2]);
            beginShape(LINES);
            for (i = 0; i < data.length; i++) {
                //fill(237, 34, 93);
                //noStroke();
                vertex(i, map(data[i]+180, 0, 255, height, 0));
            }
            endShape();
        }
        function plot2(data, col) {
            stroke(3);
            // draw lines
            let px = 0;
            let py = data[0];
            stroke(col[0], col[1], col[2]);
            for(let i =0; i < data.length; i++){
                let x = i;
                let y = (data[i])*3+128;
                //console.log((data[i])*128/Math.max(...data)+128)
                line(px, py, x, y);

                //store the last position
                px = x;
                py = y;
        }}
        function draw() {
            background(200);
            plot2(xs, [100,100,100]);
            plot2(ys, [0,200,100]);
            plot2(zs, [100, 0,200]);
            //let spectrum = fft.analyze();

        }
        draw();
        //updateChart();
        //var arr = [1, 2, 3, 4];
        //var theRemovedElement = arr.shift(); // theRemovedElement == 1
        //console.log(arr); // [2, 3, 4]
        output.innerHTML  = "alpha : " + z + "\n";
        output.innerHTML  += "beta : " + x + "\n";
        output.innerHTML += "gamma: " + y + "\n";
        output.innerHTML += "fps: " + 1000/fps + "\n";

    });










</script>
</body>
</html>




